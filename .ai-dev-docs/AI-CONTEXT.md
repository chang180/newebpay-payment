# AI å°ˆæ¡ˆä¸Šä¸‹æ–‡

## ğŸ¯ å°ˆæ¡ˆæœ¬è³ª
- **å°ˆæ¡ˆåç¨±**: NewebPay Payment Gateway for WordPress
- **å°ˆæ¡ˆé¡å‹**: WordPress ä»˜æ¬¾é–˜é“å¤–æ›
- **ä¸»è¦åŠŸèƒ½**: æ•´åˆè—æ–°é‡‘æµæ”¯ä»˜æœå‹™
- **æŠ€è¡“æ¶æ§‹**: PHP + WordPress Plugin Architecture

## ğŸ—ï¸ æ ¸å¿ƒæ¶æ§‹ (v1.0.10 é‡æ§‹å¾Œ)

### å¤–æ›æª”æ¡ˆçµæ§‹
```
newebpay-payment/
â”œâ”€â”€ Central.php                    # ä¸»è¦å¤–æ›æª”æ¡ˆ
â”œâ”€â”€ includes/                      # æ ¸å¿ƒåŠŸèƒ½é¡åˆ¥
â”‚   â”œâ”€â”€ nwp/                      # ä¸»è¦æ”¯ä»˜é–˜é“
â”‚   â”‚   â”œâ”€â”€ nwpMPG.php           # ä¸»é–˜é“é¡åˆ¥ (é‡æ§‹å¾Œ)
â”‚   â”‚   â”œâ”€â”€ nwpSetting.php       # è¨­å®šé é¢
â”‚   â”‚   â””â”€â”€ baseNwpMPG.php       # åŸºç¤é¡åˆ¥
â”‚   â”œâ”€â”€ class-newebpay-*.php     # æ–°çš„è™•ç†å™¨é¡åˆ¥
â”‚   â”œâ”€â”€ api/                      # API ç›¸é—œåŠŸèƒ½
â”‚   â”œâ”€â”€ invoice/                  # é›»å­ç™¼ç¥¨åŠŸèƒ½
â”‚   â””â”€â”€ blocks/                   # Gutenberg å€å¡Šæ”¯æ´
â”œâ”€â”€ assets/                       # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ js/                      # JavaScript æª”æ¡ˆ
â”‚   â””â”€â”€ css/                     # æ¨£å¼æª”æ¡ˆ
â”œâ”€â”€ languages/                    # å¤šèªè¨€æª”æ¡ˆ
â”‚   â”œâ”€â”€ newebpay-payment-zh_TW.po # ç¹é«”ä¸­æ–‡ç¿»è­¯
â”‚   â”œâ”€â”€ newebpay-payment-zh_TW.mo # ç¹é«”ä¸­æ–‡ç·¨è­¯æª”
â”‚   â””â”€â”€ newebpay-payment.pot     # ç¿»è­¯æ¨¡æ¿
â””â”€â”€ .ai-dev-docs/                # AI é–‹ç™¼æ–‡æª”
```

### é‡æ§‹å¾Œçš„é¡åˆ¥æ¶æ§‹
```
WC_newebpay (ä¸»é–˜é“é¡åˆ¥)
â”œâ”€â”€ Newebpay_Payment_Handler     # ä»˜æ¬¾è™•ç†é‚è¼¯
â”‚   â”œâ”€â”€ get_payment_args()       # ç”Ÿæˆä»˜æ¬¾åƒæ•¸
â”‚   â””â”€â”€ process_payment()        # è™•ç†ä»˜æ¬¾æµç¨‹
â”œâ”€â”€ Newebpay_Response_Handler     # å›æ‡‰è™•ç†é‚è¼¯
â”‚   â”œâ”€â”€ handle_callback_response() # è™•ç†å›èª¿
â”‚   â”œâ”€â”€ handle_order_received_text() # è¨‚å–®æ¥æ”¶æ–‡å­—
â”‚   â””â”€â”€ chkShaIsVaildByReturnData() # SHA é©—è­‰
â”œâ”€â”€ Newebpay_Form_Handler        # è¡¨å–®è™•ç†é‚è¼¯
â”‚   â”œâ”€â”€ display_payment_fields() # é¡¯ç¤ºä»˜æ¬¾æ¬„ä½
â”‚   â”œâ”€â”€ validate_fields()        # é©—è­‰æ¬„ä½
â”‚   â”œâ”€â”€ display_receipt_page()   # é¡¯ç¤ºæ”¶æ“šé é¢
â”‚   â””â”€â”€ generate_payment_form() # ç”Ÿæˆä»˜æ¬¾è¡¨å–®
â”œâ”€â”€ Newebpay_Order_Handler       # è¨‚å–®è™•ç†é‚è¼¯
â”‚   â””â”€â”€ display_admin_order_fields() # å¾Œå°è¨‚å–®æ¬„ä½
â”œâ”€â”€ Newebpay_Blocks_Handler      # Blocks æ•´åˆé‚è¼¯
â”‚   â”œâ”€â”€ register_blocks()        # è¨»å†Šå€å¡Š
â”‚   â””â”€â”€ render_payment_block()   # æ¸²æŸ“ä»˜æ¬¾å€å¡Š
â”œâ”€â”€ Newebpay_Validator           # è³‡æ–™é©—è­‰å·¥å…·
â”‚   â””â”€â”€ validate_payment_data()  # é©—è­‰ä»˜æ¬¾è³‡æ–™
â”œâ”€â”€ Newebpay_Error_Handler       # éŒ¯èª¤è™•ç†å·¥å…·
â”‚   â”œâ”€â”€ handle_error()           # è™•ç†éŒ¯èª¤
â”‚   â”œâ”€â”€ handle_validation_error() # è™•ç†é©—è­‰éŒ¯èª¤
â”‚   â””â”€â”€ log_exception()          # è¨˜éŒ„ä¾‹å¤–
â”œâ”€â”€ Newebpay_Cart_Manager        # è³¼ç‰©è»Šç®¡ç†å·¥å…·
â”‚   â”œâ”€â”€ clear_cart_for_order()   # æ¸…ç©ºè³¼ç‰©è»Š
â”‚   â””â”€â”€ on_payment_complete()    # ä»˜æ¬¾å®Œæˆè™•ç†
â””â”€â”€ Newebpay_Performance_Optimizer # æ•ˆèƒ½å„ªåŒ–å·¥å…·
    â”œâ”€â”€ conditional_script_loading() # æ¢ä»¶è¼‰å…¥è…³æœ¬
    â””â”€â”€ cache_management()        # å¿«å–ç®¡ç†
```

## ğŸ›¡ï¸ ç¾ä»£åŒ–åŠŸèƒ½ (v1.0.10+)

### WooCommerce Blocks æ”¯æ´
- å®Œæ•´æ”¯æ´ WooCommerce æ–°å¼å€å¡Šçµå¸³
- ç›¸å®¹æ€§è²æ˜ï¼š`cart_checkout_blocks` å’Œ `custom_order_tables`
- éŸ¿æ‡‰å¼è¨­è¨ˆå’Œç„¡éšœç¤™ç¶²é è¨­è¨ˆ
- æ”¯æ´æ‰€æœ‰æ”¯ä»˜æ–¹å¼åœ¨å€å¡Šçµå¸³ä¸­é‹ä½œ

### å¤šèªè¨€æœ¬åœ°åŒ–
- **Text Domain**: `newebpay-payment`
- **å®Œæ•´ç¹é«”ä¸­æ–‡ç¿»è­¯**: æ‰€æœ‰ä½¿ç”¨è€…ä»‹é¢ã€éŒ¯èª¤è¨Šæ¯ã€ç‹€æ…‹é€šçŸ¥
- **ç¿»è­¯è¦†è“‹ç¯„åœ**: 
  - å¾Œå°ç®¡ç†ä»‹é¢
  - å‰å°çµå¸³æµç¨‹
  - API å›æ‡‰è¨Šæ¯
  - é›»å­ç™¼ç¥¨åŠŸèƒ½
- **WordPress æ¨™æº–**: ä½¿ç”¨ `load_plugin_textdomain()` å’Œæ¨™æº– `.po/.mo` æª”æ¡ˆ

## ğŸ”Œ WordPress æ•´åˆé»

### WooCommerce æ•´åˆ
- ç¹¼æ‰¿ `WC_Payment_Gateway` é¡åˆ¥
- å¯¦ä½œæ”¯ä»˜é–˜é“æ¨™æº–ä»‹é¢
- è™•ç†è¨‚å–®ç‹€æ…‹æ›´æ–°

### WordPress Hooks
- `woocommerce_payment_gateways` - è¨»å†Šæ”¯ä»˜é–˜é“
- `woocommerce_api_*` - API å›èª¿è™•ç†
- `admin_menu` - å¾Œå°é¸å–®
- `wp_enqueue_scripts` - å‰ç«¯è³‡æºè¼‰å…¥

## ğŸ” è—æ–°é‡‘æµæ•´åˆ

### API ç«¯é»
- **æ¸¬è©¦ç’°å¢ƒ**: `https://ccore.newebpay.com/`
- **æ­£å¼ç’°å¢ƒ**: `https://core.newebpay.com/`

### æ”¯ä»˜æµç¨‹
1. å®¢æˆ¶é¸æ“‡è—æ–°ä»˜æ¬¾
2. ç”ŸæˆåŠ å¯†æ”¯ä»˜è³‡æ–™
3. å°å‘è—æ–°ä»˜æ¬¾é é¢
4. è—æ–°å›èª¿è™•ç†çµæœ
5. æ›´æ–°è¨‚å–®ç‹€æ…‹

### åŠ å¯†æ©Ÿåˆ¶
- ä½¿ç”¨ AES-256-CBC åŠ å¯†
- SHA-256 é›œæ¹Šé©—è­‰
- æ™‚é–“æˆ³é˜²é‡æ’­æ”»æ“Š

## ğŸ› ï¸ é–‹ç™¼ç’°å¢ƒè¦æ±‚

### æŠ€è¡“éœ€æ±‚
- PHP 7.4+
- WordPress 5.0+
- WooCommerce 3.0+
- SSL è­‰æ›¸ï¼ˆæ­£å¼ç’°å¢ƒï¼‰

### é–‹ç™¼å·¥å…·
- Composerï¼ˆä¾è³´ç®¡ç†ï¼‰
- PHPUnitï¼ˆå–®å…ƒæ¸¬è©¦ï¼‰
- WordPress Coding Standards

## ğŸš¨ å®‰å…¨è€ƒé‡

### è³‡æ–™ä¿è­·
- æ•æ„Ÿè³‡æ–™ä¸å„²å­˜åœ¨è³‡æ–™åº«
- API é‡‘é‘°åŠ å¯†å„²å­˜
- äº¤æ˜“è³‡æ–™å³æ™‚åŠ å¯†

### é©—è­‰æ©Ÿåˆ¶
- ä¾†æº IP é©—è­‰
- ç°½ç« é©—è­‰
- æ™‚é–“æˆ³é©—è­‰

## ğŸ“ è¨­å®šèˆ‡é…ç½®

### å¿…è¦è¨­å®š
- å•†åº—ä»£è™Ÿ (MerchantID)
- HashKey
- HashIV
- ç’°å¢ƒè¨­å®šï¼ˆæ¸¬è©¦/æ­£å¼ï¼‰

### å¯é¸è¨­å®š
- ä»˜æ¬¾æ–¹å¼é¸æ“‡
- å›èª¿ URL è¨­å®š
- æ—¥èªŒè¨˜éŒ„ç­‰ç´š
- éŒ¯èª¤è™•ç†æ–¹å¼

## ğŸ” å¸¸è¦‹æ•´åˆé»

### å‰ç«¯æ•´åˆ
- çµå¸³é é¢ä»˜æ¬¾é¸é …
- ä»˜æ¬¾çµæœé é¢
- éŒ¯èª¤è¨Šæ¯é¡¯ç¤º

### å¾Œç«¯æ•´åˆ
- è¨‚å–®ç®¡ç†ä»‹é¢
- äº¤æ˜“è¨˜éŒ„æŸ¥è©¢
- è¨­å®šé é¢
- æ—¥èªŒæª¢è¦–

## ğŸ¨ å®¢è£½åŒ–è¦é»

### æ¨£å¼å®¢è£½åŒ–
- ä½¿ç”¨ WordPress æ¨™æº–æ¨£å¼
- æ”¯æ´ä¸»é¡Œå®¢è£½åŒ–
- RWD éŸ¿æ‡‰å¼è¨­è¨ˆ

### åŠŸèƒ½æ“´å±•
- Hook ç³»çµ±æ”¯æ´
- Filter æ©Ÿåˆ¶
- Action è§¸ç™¼é»

## ğŸ—ï¸ é‡æ§‹å„ªå‹¢ (v1.0.10)

### å–®ä¸€è·è²¬åŸå‰‡
- æ¯å€‹è™•ç†å™¨é¡åˆ¥å°ˆæ³¨ç‰¹å®šåŠŸèƒ½
- æ¸…æ™°çš„è·è²¬åˆ†é›¢
- æ˜“æ–¼ç¶­è­·å’Œæ¸¬è©¦

### éŒ¯èª¤éš”é›¢
- å•é¡Œå®šä½æ›´ç²¾ç¢º
- ç¨ç«‹çš„éŒ¯èª¤è™•ç†
- æ›´å¥½çš„é™¤éŒ¯é«”é©—

### æ•ˆèƒ½å„ªåŒ–
- æ¢ä»¶è¼‰å…¥æ©Ÿåˆ¶
- å¿«å–ç®¡ç†
- è³‡æºå„ªåŒ–

### å¯æ“´å±•æ€§
- æ˜“æ–¼æ·»åŠ æ–°åŠŸèƒ½
- æ¨¡çµ„åŒ–è¨­è¨ˆ
- æ¨™æº–åŒ–ä»‹é¢

é€™äº›è³‡è¨Šæ§‹æˆäº† AI é–‹ç™¼æ­¤å°ˆæ¡ˆçš„æ ¸å¿ƒä¸Šä¸‹æ–‡ï¼Œç„¡éœ€é‡æ–°åˆ†ææ•´å€‹ç¨‹å¼åº«å³å¯é–‹å§‹é–‹ç™¼å·¥ä½œã€‚